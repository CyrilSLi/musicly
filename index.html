<!DOCTYPE html>
<html lang="en">
<head>
    <title>musicly</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
</head>
<body onload="brython()">
    <main class="container">
        <h1>musicly</h1>
        <input type="range" id="pitch">
        <p>A simple music player built with Python and Brython.</p>
        <audio id="audio-player" controls>
            <source src="your-audio-file.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <br><br>
        <button id="play-btn">Play</button>
        <button id="pause-btn">Pause</button>
        <button id="stop-btn">Stop</button>
    </main>
    <script>
        const audioCtx = new(window.AudioContext || window.webkitAudioContext)();

        function playNote(frequency, duration) {
        const oscillator = audioCtx.createOscillator();

        oscillator.type = 'square';
        oscillator.frequency.value = frequency;
        oscillator.connect(audioCtx.destination);
        oscillator.start();

        setTimeout(
            function() {
            oscillator.stop();
            playMelody();
            }, duration);
        }

        function playMelody() {
        if (notes.length > 0) {
            note = notes.pop();
            playNote(note[0], 1000 * 256 / (note[1] * tempo));
        }
        }

        notes = [
        [659, 4],
        [659, 4],
        [659, 4],
        [523, 8],
        [0, 16],
        [783, 16],
        [659, 4],
        [523, 8],
        [0, 16],
        [783, 16],
        [659, 4],
        [0, 4],
        [987, 4],
        [987, 4],
        [987, 4],
        [1046, 8],
        [0, 16],
        [783, 16],
        [622, 4],
        [523, 8],
        [0, 16],
        [783, 16],
        [659, 4]
        ];

        notes.reverse();
        tempo = 100;

        playMelody();
    </script>
